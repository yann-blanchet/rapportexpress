# PWA Setup Guide

The app is now configured as a Progressive Web App (PWA) using `vite-plugin-pwa`.

## Features

- ✅ Offline support with service worker
- ✅ Installable on mobile devices and desktop
- ✅ App-like experience (standalone mode)
- ✅ Automatic updates
- ✅ Caching for better performance

## Icon Setup

You need to create app icons for the PWA. The app expects:
- `public/icon-192.png` (192x192 pixels)
- `public/icon-512.png` (512x512 pixels)

### Using SVG as Source (Recommended)

**Note**: PWA manifests require PNG files, but you can design your icon as SVG and convert it!

1. **Create or edit** `public/icon.svg` - Design your icon as SVG (scalable, easy to edit)
2. **Convert to PNG** using one of these methods:

#### Method 1: Use the built-in converter
1. Open `convert-icon.html` in your browser (after starting dev server)
2. Load your `icon.svg` file
3. Click "Download" buttons to get the PNG files
4. Save them to `public/` directory

#### Method 2: Online tools
- [CloudConvert](https://cloudconvert.com/svg-to-png) - Upload SVG, download PNG
- [Convertio](https://convertio.co/svg-png/) - Simple SVG to PNG converter
- [PWA Builder Image Generator](https://www.pwabuilder.com/imageGenerator)

#### Method 3: Command line (ImageMagick)
```bash
# Convert SVG to PNG at different sizes
convert -background none -size 512x512 public/icon.svg public/icon-512.png
convert -background none -size 192x192 public/icon.svg public/icon-192.png
```

#### Method 4: Using Node.js (sharp)
```bash
npm install --save-dev sharp
node -e "const sharp = require('sharp'); sharp('public/icon.svg').resize(512).toFile('public/icon-512.png'); sharp('public/icon.svg').resize(192).toFile('public/icon-192.png');"
```

### Default Icon

A default SVG icon is provided at `public/icon.svg`. You can:
- Edit it directly (it's just an SVG file)
- Replace it with your own design
- Convert it to PNG using any method above

## Installation

1. Install dependencies:
```bash
npm install
```

**Note**: If you encounter peer dependency conflicts with Vite 7, use:
```bash
npm install --legacy-peer-deps
```

2. Build the app:
```bash
npm run build
```

3. The PWA will be available in the built files

## Testing PWA

### Desktop (Chrome/Edge)
1. Build and serve the app: `npm run build && npm run preview`
2. Open DevTools → Application tab
3. Check "Service Workers" and "Manifest"
4. Click "Install" button in the address bar

### Mobile
1. Serve the app over HTTPS (required for PWA)
2. Open on mobile browser
3. Use "Add to Home Screen" option
4. The app will install as a standalone app

## Service Worker

The service worker is automatically generated by `vite-plugin-pwa` and will:
- Cache app assets for offline use
- Cache Supabase API responses (with network-first strategy)
- Auto-update when new version is available

## Configuration

PWA settings are configured in `vite.config.js`:
- Manifest settings (name, icons, theme colors)
- Workbox configuration (caching strategies)
- Auto-update behavior

## Notes

- The app works offline using IndexedDB (Dexie)
- Supabase sync happens when online
- Service worker caches static assets automatically
- API calls use network-first strategy (always try network, fallback to cache)
